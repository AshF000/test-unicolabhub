{% extends 'base.html' %}

{% block title %}
{% if user.is_authenticated %}
UniColabHub - {{user.username}}
{% else %}
Username
{% endif %}
{% endblock %}

{% block content %}
<div class="row py-5 px-4">
    <div class="col-md-8 mx-auto"> <!-- Profile widget -->
        <div class="bg-white shadow rounded overflow-hidden">
            <div class="px-4 pt-4 pb-4 cover">
                <div class="media align-items-end profile-head">
                    <div class="profile mr-3">
                        <div style="display:flex; align-items: start; column-gap: 20px;">

                            <div class="dropdown">
                              <button class="btn p-0 border-0" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                    {% if profile.profile_pic %}
                                        <img src="{{ profile.profile_pic.url }}" alt="Profile Picture" width="130" class="rounded mb-2 img-thumbnail">
                                    {% else %}
                                        <img src="https://via.placeholder.com/130?text=No+Image" alt="No Profile Picture" width="130" class="rounded mb-2 img-thumbnail">
                                    {% endif %}
                              </button>
                              <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                                <li><a class="dropdown-item" href="{% url 'user:update_profile_pic' %}">Update</a></li>
                                <li><a class="dropdown-item" href="{% url 'home' %}">Delete</a></li>
                              </ul>
                            </div>


                            <div>

                                <p style="margin-bottom: 0;">@{{user.username}}</p>
                                <h4>
                                    {% if user.first_name or user.last_name %}
                                    {{user.first_name}} {{user.last_name}}
                                    {%else%}
                                    Update profile to show name
                                    {% endif %}
                                </h4>


                                <p>
                                    {% if profile.collaborator_university_id %}
                                    Reg: {{profile.collaborator_university_id}}
                                    {%else%}
                                    Update profile to show reg.
                                    {% endif %}
                                </p>
                                <a href="{% url 'user:update_profile'%}"
                                   class="btn btn-outline-dark btn-sm btn-block">Edit Profile</a>
                                <a href="{% url 'user:delete_user'%}"
                                   class="btn btn-outline-dark btn-sm btn-block">Delete Account</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="px-4 py-3"><h5 class="mb-0">About</h5>
                <div class="p-4 rounded shadow-sm bg-light">
                    <p class="font-italic mb-0">DOB: {{user.collabuser.collaborator_date_of_birth}}</p>
                    <p class="font-italic mb-0">About: {{user.collabuser.collaborator_about}}</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}